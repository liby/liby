- [Claude Code: Best practices for agentic coding](https://www.anthropic.com/engineering/claude-code-best-practices) #AI
- SQL 查询的执行顺序
	- 完整的 SELECT 查询语句结构
		- ```sql
		  SELECT DISTINCT column, AGG_FUNC(column_or_expression), …
		  FROM mytable
		    JOIN another_table
		      ON mytable.column = another_table.column
		    WHERE constraint_expression
		    GROUP BY column
		    HAVING constraint_expression
		    ORDER BY column ASC/DESC
		    LIMIT count OFFSET COUNT;
		  ```
	- SQL 查询并不是按照我们书写的顺序执行的，而是有其特定的执行顺序：
		- 1. FROM 和 JOIN（第一步）
			- ```sql
			  FROM mytable
			  JOIN another_table ON mytable.column = another_table.column
			  ```
			- **作用**：确定查询的数据源
			- **说明**：首先执行 FROM 子句，确定要查询哪些表，然后执行 JOIN 操作，将多个表连接起来
			- **结果**：生成一个包含所有相关表数据的"工作集"
		- #### 2. WHERE（第二步）
			- ```sql
			  WHERE constraint_expression
			  ```
			- **作用**：过滤行数据
			- **说明**：对第一步产生的数据集进行行级过滤，不满足条件的行会被删除
			- **注意**：此时不能使用 SELECT 中定义的别名
		- 3. GROUP BY（第三步）
			- ```sql
			  GROUP BY column
			  ```
			- **作用**：对数据进行分组
			- **说明**：将满足 WHERE 条件的行按指定列进行分组
			- **结果**：每个分组只保留一行数据
		- 4. HAVING（第四步）
			- ```sql
			  HAVING constraint_expression
			  ```
			- **作用**：过滤分组
			- **说明**：对 GROUP BY 产生的分组进行过滤
			- **区别**：WHERE 过滤行，HAVING 过滤分组
		- 5. SELECT（第五步）
			- ```sql
			  SELECT DISTINCT column, AGG_FUNC(column_or_expression)
			  ```
			- **作用**：选择要显示的列
			- **说明**：计算 SELECT 中的表达式，包括聚合函数
		- 6. DISTINCT（第六步）
			- **作用**：去除重复行
			- **说明**：如果使用了 DISTINCT，会删除结果集中的重复行
		- 7. ORDER BY（第七步）
			- ```sql
			  ORDER BY column ASC/DESC
			  ```
			- **作用**：对结果排序
			- **说明**：可以使用 SELECT 中定义的别名
			- **选项**：ASC（升序）或 DESC（降序）
		- 8. LIMIT / OFFSET（第八步）
			- ```sql
			  LIMIT count OFFSET count
			  ```
			- **作用**：限制返回的行数
			- **说明**：LIMIT 指定返回多少行，OFFSET 指定跳过多少行
	- 重要提示
		- 1. 别名使用限制：
			- WHERE 和 HAVING 中不能使用 SELECT 定义的别名
			- ORDER BY 可以使用 SELECT 定义的别名
		- 2. WHERE vs HAVING：
			- WHERE：在分组前过滤行
			- HAVING：在分组后过滤组
		- 3. 性能考虑：
			- 尽早过滤数据（使用 WHERE）可以提高查询性能
			- 理解执行顺序有助于编写更高效的查询