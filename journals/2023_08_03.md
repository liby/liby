- [为什么在 TSX 文件中为箭头函数添加泛型会导致报错？](https://twitter.com/magic_akari/status/1497117758307246081) #question
	- [代码出处](https://github.com/microsoft/TypeScript/blob/main/src/compiler/parser.ts#L5267)：TypeScript 项目中的解析器部分
		- 这段代码的主要作用是在 JSX 语法环境下识别并正确处理 TypeScript 泛型的箭头函数。具体来说，它会查看源代码中的下一个标记（token），然后根据一些特定规则来判断这是一个 TypeScript 泛型的箭头函数还是一个 JSX 元素。
			- `lookAhead(() => {...})` 是一个函数，用于预查后续的 token，而不改变解析器的状态。
			- `parseOptional(SyntaxKind.ConstKeyword);` 这一行会尝试解析 `const` 关键字。如果下一个 token 是 `const`，那么解析器就会消耗掉这个 token 并移动到下一个。如果不是，解析器则不会做任何事情。
			- `const third = nextToken();` 这一行获取下一个 token，并将其赋值给变量 `third`。
			- 接下来的判断逻辑会根据 `third` 的值做出不同的处理：
				- 如果 `third` 是 `extends` 关键字，那么它会再看下一个 token，并将其赋值给 `fourth`。如果 `fourth` 是 `=`、`>` 或 `/`，那么它会返回 `false`，表示这不是一个箭头函数。否则，它会返回 `true`，表示这是一个箭头函数。
				- 如果 `third` 是 `,` 或 `=`，那么它会返回 `true`，表示这是一个箭头函数。
				- 如果 `third` 不是上述任何一个，那么它会返回 `false`，表示这不是一个箭头函数。
			- 这个预查函数 `lookAhead` 的结果被赋值给了 `isArrowFunctionInJsx`。如果结果是 `true`，那么解析器会认为这是一个泛型箭头函数，返回 `Tristate.True`。否则，解析器会认为这是一个 JSX 元素，返回 `Tristate.False`
	- 当在 TSX 文件中使用 TypeScript 的泛型，例如 `const foo = <T>(x: T) => x;`，TypeScript 编译器（tsc）会把 `<T>` 当作 JSX 元素解析，从而报出错误